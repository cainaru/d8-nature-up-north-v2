/*
 * component
 * Version: 1.0.0 - 2017-06-06
 */

angular.module("map-component",["templates-map-component","uiGmapgoogle-maps"]).config(["uiGmapGoogleMapApiProvider","$logProvider",function(a,b){var c=document.querySelector("*[ng-app]"),d=c?c.attributes.getNamedItem("api-key"):void 0;a.configure({key:d.value,v:"3.27"});var e=window.location.hash&&window.location.hash.match(/^#.*#debug/);b.debugEnabled(e)}]).directive("mapComponent",["$log","uiGmapGoogleMapApi",function(a,b){return{restrict:"C",scope:{markerSources:"@"},template:'<ui-gmap-google-map ng-if="map" center="map.center" zoom="map.zoom" options="map.options" events="map.events"><map-component-markers ng-repeat="source in sources" source="{{source}}"></map-component-markers></ui-gmap-google-map>',link:function(a){a.sources=a.markerSources.split(","),b.then(function(b){a.map={center:{latitude:43.807507,longitude:-74.330217},zoom:6,options:{mapTypeId:b.MapTypeId.TERRAIN,mapTypeControl:!0,streetViewControl:!1,zoomControl:!0}}})}}}]).directive("mapComponentMarkers",["$log","$http","$compile","$timeout",function(a,b,c,d){return{restrict:"E",scope:{source:"@"},template:'<ui-gmap-markers models="results.markers" idKey="\'id\'" coords="\'self\'" icon="\'icon\'" options="\'markerOpts\'" type="type" control="mapControl" events="markerEvents"></ui-gmap-markers>',link:function(e){var f;e.results={markers:[]},e.mapControl={},e.markerEvents={click:function(b){a.debug("click",b),e.$apply(function(){e.infoMarker=b.model;var a='<div id="infoWindow" class="ng-cloak" ng-cloak><div class="marker-info">';a+='<h3 ng-cloak><a ng-href="{{infoMarker._self}}">{{infoMarker.title}}</a></h3>',a+="<p>{{infoMarker.description}}</p>",a+="</div></div>";var g=c(a)(e);f||(f=new google.maps.InfoWindow({maxWidth:500,content:"info window contents"})),d(function(){f.setContent(g.html()),f.setPosition(b.getPosition()),f.open(b.map)})})}},b.get("/api/map_component/markers/"+e.source).then(function(a){var b=a.data.icon,c=a.data.list;e.type=a.data.type,b&&c.forEach(function(a){a.icon||(a.icon=b)}),e.results.markers=c})}}}]),angular.module("templates-map-component",[]);